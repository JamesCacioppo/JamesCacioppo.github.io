<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.91.2">
<link rel=canonical type=text/html href=/docs/>
<meta name=robots content="noindex, nofollow">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Documentation | Modern Engineer</title>
<meta name=description content="


Here you will find the main purpose of this site: documentation, cheat sheets, and tutorials.



">
<meta property="og:title" content="Documentation">
<meta property="og:description" content="The Modern Engineer">
<meta property="og:type" content="website">
<meta property="og:url" content="/docs/"><meta property="og:site_name" content="Modern Engineer">
<meta itemprop=name content="Documentation">
<meta itemprop=description content="The Modern Engineer"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Documentation">
<meta name=twitter:description content="The Modern Engineer">
<link rel=preload href=/scss/main.min.dcab2c3dae6e6fefb7672f19e4b612cc4e75ca208740f642aa2f1fe378478a8f.css as=style>
<link href=/scss/main.min.dcab2c3dae6e6fefb7672f19e4b612cc4e75ca208740f642aa2f1fe378478a8f.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-00000000-0','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo></span><span class=font-weight-bold>Modern Engineer</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/about/><span>About</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>Documentation</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/blog/><span>Blog</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.be01d1098280627865138e59fe60a1ea.json data-offline-search-base-href=/ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href=/docs/>Return to the regular view of this page</a>.
</p>
</div>
<h1 class=title>Documentation</h1>
<ul>
<li>1: <a href=#pg-a3dc268343183a6d68ccfb2780699e41>Random Notes</a></li>
<ul>
<li>1.1: <a href=#pg-24ae67c1d25ae474309b8b67003fc761>Safer bash scripts with 'set -euxo pipefail'</a></li>
<li>1.2: <a href=#pg-47d637b9567e863a215dbfde351c37ae>Scratch Pad</a></li>
<li>1.3: <a href=#pg-b9c924164a9ecf974bab37b2fd4f85b4>Pulumi</a></li>
</ul>
<li>2: <a href=#pg-68d71c09df3f858ac5772e2ba9ad168d>Encryption</a></li>
<ul>
<li>2.1: <a href=#pg-533cf167b457b8369b125513c24ca2d7>OpenSSL Cheat Sheet</a></li>
</ul>
<li>3: <a href=#pg-7d7eef4618c2f177c684c0ca94af17b0>Git</a></li>
<ul>
<li>3.1: <a href=#pg-24d869ba2b6662ae570dfb963bd58e42>The Working Tree and Stashing</a></li>
<li>3.2: <a href=#pg-0304081d2c62be026198404960422fbb>Git Tagging</a></li>
<li>3.3: <a href=#pg-0cde9297815cb0591dfd63e7a143ee56>Git Commands</a></li>
<li>3.4: <a href=#pg-72917d778cefb3b60488baee65f8afd6>Git Configuration</a></li>
<li>3.5: <a href=#pg-6a19582a95197f2ee94de00825c74b64>Git Branching</a></li>
</ul>
<li>4: <a href=#pg-5e21f753738e878cd64571cab14673ef>Kube Bench</a></li>
<ul>
</ul>
<li>5: <a href=#pg-92c27ea962011595550955f7c41b869a>Python</a></li>
<ul>
<li>5.1: <a href=#pg-25f0fc747a43e426abe5e799bae26667>venv</a></li>
<li>5.2: <a href=#pg-53649de095686aeee23ac7b7ea4778d3>Pytest</a></li>
<li>5.3: <a href=#pg-57d045430feb096ff52b18f9ffa67d26>Pyenv</a></li>
</ul>
<li>6: <a href=#pg-d77fd444f8f51d12a8a2fdbaba8cce61>Markdown</a></li>
<ul>
</ul>
</ul>
<div class=content>
<div class="pageinfo pageinfo-primary">
<p>Here you will find the main purpose of this site: documentation, cheat sheets, and tutorials.</p>
</div>
</div>
</div>
<div class=td-content>
<h1 id=pg-a3dc268343183a6d68ccfb2780699e41>1 - Random Notes</h1>
<div class=lead>A scratch pad for random notes</div>
</div>
<div class=td-content>
<h1 id=pg-24ae67c1d25ae474309b8b67003fc761>1.1 - Safer bash scripts with 'set -euxo pipefail'</h1>
<div class=lead>Safer bash scripts, taken from Tom Van Eyck</div>
<div class="pageinfo pageinfo-primary">
<p>The following post was sourced from Tom Van Eyck&rsquo;s blog over at <a href=https://vaneyckt.io/posts/safer_bash_scripts_with_set_euxo_pipefail/>https://vaneyckt.io/posts/safer_bash_scripts_with_set_euxo_pipefail/</a>. His last post was in 2018 and his github has been idle for as long so I&rsquo;ve become worried that something might happen to his blog. Because I refer to this article so frequently, I have decided to preserve it here.</p>
</div>
<p>Often times developers go about writing bash scripts the same as writing code in a higher-level language. This is a big mistake as higher-level languages offer safeguards that are not present in bash scripts by default. For example, a Ruby script will throw an error when trying to read from an uninitialized variable, whereas a bash script won&rsquo;t. In this article, we&rsquo;ll look at how we can improve on this.</p>
<p>The bash shell comes with several builtin commands for modifying the behavior of the shell itself. We are particularly interested in the <a href=https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html>set builtin</a>, as this command has several options that will help us write safer scripts. I hope to convince you that it&rsquo;s a really good idea to add <code>set -euxo pipefail</code> to the beginning of all your future bash scripts.</p>
<h3 id=set--e>set -e</h3>
<p>The <code>-e</code> option will cause a bash script to exit immediately when a command fails. This is generally a vast improvement upon the default behavior where the script just ignores the failing command and continues with the next line. This option is also smart enough to not react on failing commands that are part of conditional statements. Moreover, you can append a command with <code>|| true</code> for those rare cases where you don&rsquo;t want a failing command to trigger an immediate exit.</p>
<h4 id=before>Before</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#8f5902;font-style:italic># &#39;foo&#39; is a non-existing command</span>
foo
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># line 4: foo: command not found</span>
<span style=color:#8f5902;font-style:italic># bar</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Note how the script didn&#39;t exit when the foo command could not be found.</span>
<span style=color:#8f5902;font-style:italic># Instead it continued on and echoed &#39;bar&#39;.</span>
</code></pre></div><h4 id=after>After</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -e

<span style=color:#8f5902;font-style:italic># &#39;foo&#39; is a non-existing command</span>
foo
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># line 5: foo: command not found</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># This time around the script exited immediately when the foo command wasn&#39;t found.</span>
<span style=color:#8f5902;font-style:italic># Such behavior is much more in line with that of higher-level languages.</span>
</code></pre></div><h4 id=any-command-returning-a-non-zero-exit-code-will-cause-an-immediate-exit>Any command returning a non-zero exit code will cause an immediate exit</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -e

<span style=color:#8f5902;font-style:italic># &#39;ls&#39; is an existing command, but giving it a nonsensical param will cause</span>
<span style=color:#8f5902;font-style:italic># it to exit with exit code 1</span>
<span style=color:#204a87;font-weight:700>$(</span>ls foobar<span style=color:#204a87;font-weight:700>)</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># ls: foobar: No such file or directory</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># I&#39;m putting this in here to illustrate that it&#39;s not just non-existing commands</span>
<span style=color:#8f5902;font-style:italic># that will cause an immediate exit.</span>
</code></pre></div><h4 id=preventing-an-immediate-exit>Preventing an immediate exit</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -e

foo <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#204a87>true</span>
<span style=color:#204a87;font-weight:700>$(</span>ls foobar<span style=color:#204a87;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#204a87>true</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># line 4: foo: command not found</span>
<span style=color:#8f5902;font-style:italic># ls: foobar: No such file or directory</span>
<span style=color:#8f5902;font-style:italic># bar</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Sometimes we want to ensure that, even when &#39;set -e&#39; is used, the failure of</span>
<span style=color:#8f5902;font-style:italic># a particular command does not cause an immediate exit. We can use &#39;|| true&#39; for this.</span>
</code></pre></div><h4 id=failing-commands-in-a-conditional-statement-will-not-cause-an-immediate-exit>Failing commands in a conditional statement will not cause an immediate exit</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -e

<span style=color:#8f5902;font-style:italic># we make &#39;ls&#39; exit with exit code 1 by giving it a nonsensical param</span>
<span style=color:#204a87;font-weight:700>if</span> ls foobar<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>then</span>
  <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;foo&#34;</span>
<span style=color:#204a87;font-weight:700>else</span>
  <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>
<span style=color:#204a87;font-weight:700>fi</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># ls: foobar: No such file or directory</span>
<span style=color:#8f5902;font-style:italic># bar</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Note that &#39;ls foobar&#39; did not cause an immediate exit despite exiting with</span>
<span style=color:#8f5902;font-style:italic># exit code 1. This is because the command was evaluated as part of a</span>
<span style=color:#8f5902;font-style:italic># conditional statement.</span>
</code></pre></div><p>That&rsquo;s all for <code>set -e</code>. However, <code>set -e</code> by itself is far from enough. We can further improve upon the behavior created by <code>set -e</code> by combining it with <code>set -o pipefail</code>. Let&rsquo;s have a look at that next.</p>
<h3 id=set--o-pipefail>set -o pipefail</h3>
<p>The bash shell normally only looks at the exit code of the last command of a pipeline. This behavior is not ideal as it causes the <code>-e</code> option to only be able to act on the exit code of a pipeline&rsquo;s last command. This is where <code>-o pipefail</code> comes in. This particular option sets the exit code of a pipeline to that of the rightmost command to exit with a non-zero status, or to zero if all commands of the pipeline exit successfully.</p>
<h4 id=before-1>Before</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -e

<span style=color:#8f5902;font-style:italic># &#39;foo&#39; is a non-existing command</span>
foo <span style=color:#000;font-weight:700>|</span> <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;a&#34;</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># a</span>
<span style=color:#8f5902;font-style:italic># line 5: foo: command not found</span>
<span style=color:#8f5902;font-style:italic># bar</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Note how the non-existing foo command does not cause an immediate exit, as</span>
<span style=color:#8f5902;font-style:italic># it&#39;s non-zero exit code is ignored by piping it with &#39;| echo &#34;a&#34;&#39;.</span>
</code></pre></div><h4 id=after-1>After</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -eo pipefail

<span style=color:#8f5902;font-style:italic># &#39;foo&#39; is a non-existing command</span>
foo <span style=color:#000;font-weight:700>|</span> <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;a&#34;</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># a</span>
<span style=color:#8f5902;font-style:italic># line 5: foo: command not found</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># This time around the non-existing foo command causes an immediate exit, as</span>
<span style=color:#8f5902;font-style:italic># &#39;-o pipefail&#39; will prevent piping from causing non-zero exit codes to be ignored.</span>
</code></pre></div><p>This section hopefully made it clear that <code>-o pipefail</code> provides an important improvement upon just using <code>-e</code> by itself. However, as we shall see in the next section, we can still do more to make our scripts behave like higher-level languages.</p>
<h3 id=set--u>set -u</h3>
<p>This option causes the bash shell to treat unset variables as an error and exit immediately. Unset variables are a common cause of bugs in shell scripts, so having unset variables cause an immediate exit is often highly desirable behavior.</p>
<h4 id=before-2>Before</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -eo pipefail

<span style=color:#204a87>echo</span> <span style=color:#000>$a</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># bar</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># The default behavior will not cause unset variables to trigger an immediate exit.</span>
<span style=color:#8f5902;font-style:italic># In this particular example, echoing the non-existing $a variable will just cause</span>
<span style=color:#8f5902;font-style:italic># an empty line to be printed.</span>
</code></pre></div><h4 id=after-2>After</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -euo pipefail

<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;</span><span style=color:#000>$a</span><span style=color:#4e9a06>&#34;</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># line 5: a: unbound variable</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Notice how &#39;bar&#39; no longer gets printed. We can clearly see that &#39;-u&#39; did indeed</span>
<span style=color:#8f5902;font-style:italic># cause an immediate exit upon encountering an unset variable.</span>
</code></pre></div><h4 id=dealing-with-a-b-variable-assignments>Dealing with ${a:-b} variable assignments</h4>
<p>Sometimes you&rsquo;ll want to use a <a href=https://unix.stackexchange.com/questions/122845/using-a-b-for-variable-assignment-in-scripts/122878>${a:-b} variable assignment</a> to ensure a variable is assigned a default value of <code>b</code> when <code>a</code> is either empty or undefined. The <code>-u</code> option is smart enough to not cause an immediate exit in such a scenario.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -euo pipefail

<span style=color:#000>DEFAULT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5</span>
<span style=color:#000>RESULT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>VAR</span><span style=color:#204a87;font-weight:700>:-</span><span style=color:#000>$DEFAULT</span><span style=color:#4e9a06>}</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;</span><span style=color:#000>$RESULT</span><span style=color:#4e9a06>&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># 5</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Even though VAR was not defined, the &#39;-u&#39; option realizes there&#39;s no need to cause</span>
<span style=color:#8f5902;font-style:italic># an immediate exit in this scenario as a default value has been provided.</span>
</code></pre></div><h4 id=using-conditional-statements-that-check-if-variables-are-set>Using conditional statements that check if variables are set</h4>
<p>Sometimes you want your script to not immediately exit when an unset variable is encountered. A common example is checking for a variable&rsquo;s existence inside an <code>if</code> statement.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -euo pipefail

<span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>[</span> -z <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>MY_VAR</span><span style=color:#204a87;font-weight:700>:-</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span> <span style=color:#ce5c00;font-weight:700>]</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>then</span>
  <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;MY_VAR was not set&#34;</span>
<span style=color:#204a87;font-weight:700>fi</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># MY_VAR was not set</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># In this scenario we don&#39;t want our program to exit when the unset MY_VAR variable</span>
<span style=color:#8f5902;font-style:italic># is evaluated. We can prevent such an exit by using the same syntax as we did in the</span>
<span style=color:#8f5902;font-style:italic># previous example, but this time around we specify no default value.</span>
</code></pre></div><p>This section has brought us a lot closer to making our bash shell behave like higher-level languages. While <code>-euo pipefail</code> is great for the early detection of all kinds of problems, sometimes it won&rsquo;t be enough. This is why in the next section we&rsquo;ll look at an option that will help us figure out those really tricky bugs that you encounter every once in a while.</p>
<h3 id=set--x>set -x</h3>
<p>The <code>-x</code> option causes bash to print each command before executing it. This can be a great help when trying to debug a bash script failure. Note that arguments get expanded before a command gets printed, which will cause our logs to contain the actual argument values that were present at the time of execution!</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -euxo pipefail

<span style=color:#000>a</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5</span>
<span style=color:#204a87>echo</span> <span style=color:#000>$a</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># + a=5</span>
<span style=color:#8f5902;font-style:italic># + echo 5</span>
<span style=color:#8f5902;font-style:italic># 5</span>
<span style=color:#8f5902;font-style:italic># + echo bar</span>
<span style=color:#8f5902;font-style:italic># bar</span>
</code></pre></div><p>That&rsquo;s it for the <code>-x</code> option. It&rsquo;s pretty straightforward, but can be a great help for debugging. Next up, we&rsquo;ll look at an option I had never heard of before that was suggested by a reader of this blog.</p>
<h3 id=reader-suggestion-set--e>Reader suggestion: set -E</h3>
<p><a href=http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_12_02.html>Traps</a> are pieces of code that fire when a bash script catches certain signals. Aside from the usual signals (e.g. <code>SIGINT</code>, <code>SIGTERM</code>, &mldr;), traps can also be used to catch special bash signals like <code>EXIT</code>, <code>DEBUG</code>, <code>RETURN</code>, and <code>ERR</code>. However, reader Kevin Gibbs pointed out that using <code>-e</code> without <code>-E</code> will cause an <code>ERR</code> trap to not fire in certain scenarios.</p>
<h4 id=before-3>Before</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -euo pipefail

<span style=color:#204a87>trap</span> <span style=color:#4e9a06>&#34;echo ERR trap fired!&#34;</span> ERR

myfunc<span style=color:#ce5c00;font-weight:700>()</span>
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic># &#39;foo&#39; is a non-existing command</span>
  foo
<span style=color:#ce5c00;font-weight:700>}</span>

myfunc
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># line 9: foo: command not found</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Notice that while &#39;-e&#39; did indeed cause an immediate exit upon trying to execute</span>
<span style=color:#8f5902;font-style:italic># the non-existing foo command, it did not case the ERR trap to be fired.</span>
</code></pre></div><h4 id=after-3>After</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87>set</span> -Eeuo pipefail

<span style=color:#204a87>trap</span> <span style=color:#4e9a06>&#34;echo ERR trap fired!&#34;</span> ERR

myfunc<span style=color:#ce5c00;font-weight:700>()</span>
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic># &#39;foo&#39; is a non-existing command</span>
  foo
<span style=color:#ce5c00;font-weight:700>}</span>

myfunc
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;bar&#34;</span>

<span style=color:#8f5902;font-style:italic># output</span>
<span style=color:#8f5902;font-style:italic># ------</span>
<span style=color:#8f5902;font-style:italic># line 9: foo: command not found</span>
<span style=color:#8f5902;font-style:italic># ERR trap fired!</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Not only do we still have an immediate exit, we can also clearly see that the</span>
<span style=color:#8f5902;font-style:italic># ERR trap was actually fired now.</span>
</code></pre></div><p>The documentation states that <code>-E</code> needs to be set if we want the <code>ERR</code> trap to be inherited by shell functions, command substitutions, and commands that are executed in a subshell environment. The <code>ERR</code> trap is normally not inherited in such cases.</p>
<h3 id=conclusion>Conclusion</h3>
<p>I hope this post showed you why using <code>set -euxo pipefail</code> (or <code>set -Eeuxo pipefail</code>) is such a good idea. If you have any other options you want to suggest, then please let me know and I&rsquo;ll be happy to add them to this list.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-47d637b9567e863a215dbfde351c37ae>1.2 - Scratch Pad</h1>
<div class=lead>A scratch pad for random notes</div>
<pre>jq '.prefixes[] | select(.region=="us-gov-east-1") | select(.service=="EC2")' < ~/Downloads/ip-ranges.json</pre>
<p><a href=https://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html>https://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b9c924164a9ecf974bab37b2fd4f85b4>1.3 - Pulumi</h1>
<div class=lead>How to use Pulumi. This is a WIP.</div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-68d71c09df3f858ac5772e2ba9ad168d>2 - Encryption</h1>
<div class=lead>All things encryption related.</div>
</div>
<div class=td-content>
<h1 id=pg-533cf167b457b8369b125513c24ca2d7>2.1 - OpenSSL Cheat Sheet</h1>
<div class=lead>OpenSSL command cheat sheet</div>
<h1 id=certificate-types>Certificate types</h1>
<h2 id=x509>X509</h2>
<h3 id=pem>PEM</h3>
<p>PEM (originally “Privacy Enhanced Mail”) is the most common format for X.509 certificates, CSRs, and cryptographic keys. A PEM file is a text file containing one or more items in Base64 ASCII encoding, each with plain-text headers and footers (e.g. <code>-----BEGIN CERTIFICATE-----</code> and <code>-----END CERTIFICATE-----</code>). A single PEM file could contain an end-entity certificate, a private key, or multiple certificates forming a complete chain of trust.
(Source: <a href=https://www.ssl.com/guide/pem-der-crt-and-cer-x-509-encodings-and-conversions/>SSL.com</a>)</p>
<p>Common file extensions are <code>.crt</code>, <code>.cer</code>, <code>.pem</code>, <code>.key</code>, <code>ca-bundle</code>.</p>
<p>View contents of the certificate in <code>CERTIFICATE_FILE</code>: <pre>openssl x509 -in <var>CERTIFICATE_FILE</var> -text -noout</pre></p>
<p>Convert PEM to DER: <pre>openssl x509 -outform der -in <var>PEM_FILE</var> -out <var>DER_FILE</var></pre></p>
<p>Convert PEM to PKCS#7: <pre>openssl crl2pkcs7 -nocrl -certfile <var>CERTIFICATE_PEM_FILE</var> -certfile <var>CA_CHAIN_PEM_FILE</var> -out <var>OUTPUT_FILE</var></pre></p>
<p>Convert PEM to PKCS#12: <pre>openssl pkcs12 -export -out <var>CERTIFICATE_FILE</var> -inkey <var>PRIVATE_KEY_FILE</var> -in <var>CERTIFICATE</var> -certfile <var>CA_CHAIN</var></pre></p>
<h3 id=der>DER</h3>
<p>DER (Distinguished Encoding Rules) is a binary encoding for X.509 certificates and private keys. Unlike PEM, DER-encoded files do not contain plain text statements such as <code>-----BEGIN CERTIFICATE-----</code>. DER files are most commonly seen in Java contexts.
(Source: <a href=https://www.ssl.com/guide/pem-der-crt-and-cer-x-509-encodings-and-conversions/>SSL.com</a>)</p>
<p>Common file extensions are <code>.der</code> and <code>.cer</code>.</p>
<p>View contents of <code>CERTIFICATE_DER_FILE</code>: <pre>openssl x509 -inform der -in <var>CERTIFICATE_DER_FILE</var> -text -noout</pre></p>
<p>Convert <code>CERTIFICATE_DER_FILE</code> to a PEM: <pre>openssl x509 -inform der -in <var>CERTIFICATE_DER_FILE</var> -out <var>CERTIFICATE_PEM_FILE</var></pre></p>
<h2 id=certificate-container-formats>Certificate container formats</h2>
<h3 id=pkcs7>PKCS#7</h3>
<p>PKCS#7 (also known as P7B) is a container format for digital certificates that is most often found in Windows and Java server contexts, and usually has the extension <code>.p7b</code>. PKCS#7 files are not used to store private keys.</p>
<h3 id=pkcs12>PKCS#12</h3>
<p>PKCS#12 (also known as PKCS12 or PFX) is a common binary format for storing a certificate chain and private key in a single, encryptable file, and usually have the filename extensions <code>.p12</code> or <code>.pfx</code>.</p>
<h4 id=convert-pkcs-to-x509>Convert PKCS to x509</h4>
<p>Extract the private key:</p>
<pre>openssl pkcs12 -in <var>P12_CERT_FILE</var> -out <var>X509_KEY_FILE</var> -nocerts -nodes</pre>
<p>Extra the certificate alone:</p>
<pre>openssl pkcs12 -in <var>P12_CERT_FILE</var> -out <var>X509_CERT_FILE</var> -nokeys -nodes -clcerts</pre>
<p>Extract the certificate and the CA chain:</p>
<pre>openssl pkcs12 -in <var>P12_CERT_FILE</var> -out <var>X509_CERT_FILE</var> -nokeys -nodes</pre>
<p>Extract the CA chain:</p>
<pre>openssl pkcs12 -in <var>P12_CERT_FILE</var> -out <var>X509_CA_CHAIN_FILE</var> -nokeys -cacerts -chain</pre>
<h1 id=handy-commands>Handy commands</h1>
<h2 id=misc-commands>Misc commands</h2>
<p>Get an x509 secret from Kubernetes and output details:</p>
<pre>kubectl get secret <var>SECRET_NAME</var> -ojson | jq -r '.data."<var>KEY</var>"' | base64 -d | openssl x509 -text</pre>
<p>Create a self signed X.509 certificate:</p>
<pre>openssl req -x509 -nodes -newkey rsa:4096 -keyout "<var>PRIVATE_KEY_FILE</var>" -out "<var>PUBLIC_KEY_FILE</var>" -subj "<var>SUBJECT</var>"</pre>
<p>Extract the client key and pass to AWK to remove all newline characters:</p>
<pre>openssl pkcs12 -in <var>PKCS12_FILE</var> -clcerts -nokeys -password pass:<var>PASSWORD</var> | awk 'NF {sub(/\r/, ""); printf "%s\\n",$0;}'</pre>
<table>
<thead>
<tr>
<th>option</th>
<th>arg</th>
<th>explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>-in</td>
<td>file</td>
<td>Input file to read from. STDIN if not provided</td>
</tr>
<tr>
<td>-clcerts</td>
<td></td>
<td>Only output client certificates (not CA certs)</td>
</tr>
<tr>
<td>-nokeys</td>
<td></td>
<td>Do not output private keys</td>
</tr>
<tr>
<td>-password</td>
<td></td>
<td>not found in linux or mac openssl</td>
</tr>
<tr>
<td>pass:password</td>
<td></td>
<td>Where password is the password</td>
</tr>
</tbody>
</table>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-7d7eef4618c2f177c684c0ca94af17b0>3 - Git</h1>
<div class=lead>Git from zero to hero. Basic to advanced concepts along with examples and tutorials.</div>
</div>
<div class=td-content>
<h1 id=pg-24d869ba2b6662ae570dfb963bd58e42>3.1 - The Working Tree and Stashing</h1>
<div class=lead>Working with the Working Tree and how to stash. This page is a WIP</div>
<ul>
<li><code>git stash -h</code> - get help</li>
<li><code>git stash</code></li>
<li><code>git stash -u</code> - also stashes untracked changes</li>
<li><code>git stash -a</code> - also stashes ignored files</li>
<li><code>git stash save "message"</code> - add annotation to stash</li>
<li><code>git stash list</code> - show all stashes</li>
<li><code>git stash show stash@{0}</code> - Show changed files in a stash</li>
<li><code>git stash show -p</code> - Shows diff</li>
<li><code>git stash show -v stash@{0}</code> - Show actual changes</li>
<li><code>git stash pop</code> - empty the stash and apply changes</li>
<li><code>git stash apply</code> - apply changes <em>and</em> keep them in your stash. Useful if you want to apply changes to multiple branches.</li>
<li><code>git stash clear</code> - delete all stashes</li>
<li><code>git stash drop stash@{0}</code> - delete a single stash</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0304081d2c62be026198404960422fbb>3.2 - Git Tagging</h1>
<div class=lead>How to create and handle tags in Git.</div>
<h2 id=creating-tags>Creating tags</h2>
<p>There are two types of tags, lightweight and annotated. The following explanation was taken from a Stack Overflow post:</p>
<blockquote>
<p>A lightweight tag is very much like a branch that doesn&rsquo;t change - it&rsquo;s just a pointer to a specific commit.</p>
</blockquote>
<blockquote>
<p>Annotated tags, however, are stored as full objects in the Git database. They’re checksummed; contain the tagger name, email, and date; have a tagging message; and can be signed and verified with GNU Privacy Guard (GPG). It’s generally recommended that you create annotated tags so you can have all this information; but if you want a temporary tag or for some reason don’t want to keep the other information, lightweight tags are available too.</p>
</blockquote>
<h3 id=create-lightweight-tag>Create lightweight tag</h3>
<pre>git tag <var>TAG</var></pre>
<h3 id=create-annotated-tag>Create annotated tag</h3>
<pre>git tag -a <var>TAG</var> -m <var>COMMIT MESSAGE</var></pre>
<h2 id=handling-tags>Handling tags</h2>
<h3 id=pushing-new-tags>Pushing new tags</h3>
<pre>git push origin <var>TAG</var></pre>
<h3 id=deleting-local-tags>Deleting local tags</h3>
<pre>git tag -d <var>TAG</var></pre>
<h3 id=deleting-remote-tags>Deleting remote tags</h3>
<pre>git push origin --delete <var>TAG</var></pre>
<h2 id=listing-tags>Listing tags</h2>
<pre>git tag</pre>
<h3 id=sorting-output>Sorting output</h3>
<p>Use the <em>sort</em> switch <code>--sort=&lt;type></code>, where <em>type</em> can be:</p>
<ul>
<li><code>refname</code>: lexicographic order</li>
<li><code>version:refname</code> or <code>v:refname</code>: tag names are treated as versions
<div class="alert alert-info" role=alert>
<h4 class=alert-heading>Reverse order</h4>
Prepend <em>type</em> with <code>-</code> to reverse order.
</div>
</li>
</ul>
<h3 id=examples>Examples</h3>
<p>Lexical sort</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git tag -l --sort<span style=color:#ce5c00;font-weight:700>=</span>refname <span style=color:#4e9a06>&#34;foo*&#34;</span>
foo1.10
foo1.3
foo1.6
</code></pre></div><p>Version sort</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git tag -l --sort<span style=color:#ce5c00;font-weight:700>=</span>version:refname <span style=color:#4e9a06>&#34;foo*&#34;</span>
foo1.10
foo1.6
foo1.3
</code></pre></div><p>Reverse version sort</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git tag -l --sort<span style=color:#ce5c00;font-weight:700>=</span>-version:refname <span style=color:#4e9a06>&#34;foo*&#34;</span>
foo1.10
foo1.6
foo1.3
</code></pre></div><p>Reverse lexical sort</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git tag -l --sort<span style=color:#ce5c00;font-weight:700>=</span>-refname <span style=color:#4e9a06>&#34;foo*&#34;</span>
foo1.6
foo1.3
foo1.10
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0cde9297815cb0591dfd63e7a143ee56>3.3 - Git Commands</h1>
<div class=lead>Various git commands. This is a WIP.</div>
<h1 id=this-is-a-wip>This is a WIP</h1>
<h2 id=git-add>git-add</h2>
<h2 id=git-commit>git-commit</h2>
<h2 id=git-merge>git-merge</h2>
<h2 id=git-log>git-log</h2>
<ul>
<li><code>git log --oneline</code></li>
<li><code>git log --stat</code></li>
<li><code>git log -p</code></li>
<li><code>git shortlog</code> - groups commits by user</li>
<li><code>git log --graph --oneline --decorate</code> - the golden command</li>
</ul>
<p>Additional resources:
<a href=https://www.atlassian.com/git/tutorials/git-log>https://www.atlassian.com/git/tutorials/git-log</a></p>
<h2 id=git-blame>git-blame</h2>
<h2 id=git-diff>git-diff</h2>
<h2 id=git-show>git-show</h2>
<p>Show information about various objects</p>
<h2 id=git-restore>git-restore</h2>
<p>Restore a file from a previous commit</p>
<pre>git restore --source <var>HEAD~1</var> <var>FILE_NAME<var></pre>
<p>Restore a file from HEAD</p>
<pre>git restore <var>FILE_NAME</var></pre>
<p>Restore all files in the current directory from HEAD</p>
<pre>git restore .</pre>
<h2 id=git-reset>git-reset</h2>
<pre>git reset --soft <var>COMMIT</var></pre>
<pre>git reset --hard <var>COMMIT</var></pre>
<h2 id=removing-a-commit>Removing a commit</h2>
<p>Delete the last commit: <code>git reset --hard HEAD~1</code>
Force push the changes: <code>git push -f <var>remote</var> <var>branch</var></code></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-72917d778cefb3b60488baee65f8afd6>3.4 - Git Configuration</h1>
<div class=lead>How to configure git.</div>
<h2 id=configuration>Configuration</h2>
<h3 id=git-configuration-location>Git configuration location</h3>
<p>There are three places where configuration is stored:</p>
<ol>
<li>System: <code><var>path</var>/etc/gitconfig</code></li>
<li>Global: <code>~/.gitconfig</code> or <code>/.config/git/config</code></li>
<li>Local: <code><var>repo</var>/.git/config</code></li>
</ol>
<p>When using the <code>git config</code> command you can pass <code>--system</code>, <code>--global</code>, or <code>--local</code> to specify which configuration you&rsquo;d like to modify. The list above is in order of precedence from lowest to highest. Values in the local config will override values in global and system. Values in global will override values in system.</p>
<p>To show all configurations and their source execute <code>git config --list --show-origin</code></p>
<h3 id=how-to-use-git-config>How to use git-config</h3>
<p>To see the man page, which is really good for this command, execute <code>man git-config</code>. The &ldquo;name&rdquo; of the option to affect is the section and key separated by a period (e.g. alias.br).</p>
<p>There are several options <code>query/set/replace/unset</code>.</p>
<p>To create <code>git config alias.br 'branch -a'</code></p>
<p>To unset <code>git config --unset alias.br</code></p>
<h3 id=required-configurations>Required configurations</h3>
<p>In order to commit in a repo you&rsquo;ll need to ensure that two values are set at some configuration level:</p>
<ul>
<li>Email: <code>git config &ndash;global user.name &ldquo;<var>USER-NAME</var>"</code></li>
<li>Username: <code>git config &ndash;global user.email &ldquo;<var>EMAIL</var>"</code></li>
</ul>
<h3 id=aliases>Aliases</h3>
<p>A very useful configuration is an alias. It allows you to create a short alias for a long command. Another benefit is having an alias is like having notes you can look up when you forget a seldom used command.</p>
<p>To create an alias <code>git config &ndash;global alias.<var>ALIAS-NAME</var> <var>COMMAND</var></code></p>
<p>An example would be to set <code>git br</code> to <code>git branch -a</code></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git config --global alias.br <span style=color:#4e9a06>&#39;branch -a&#39;</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6a19582a95197f2ee94de00825c74b64>3.5 - Git Branching</h1>
<div class=lead>Branching concepts and commands.</div>
<p>The first thing to understand about Git is it&rsquo;s a distributed Source Control Manager (SCM). This means that the repository isn&rsquo;t stored in a central location. It&rsquo;s stored on every developer&rsquo;s computer. When it was first created this was how it was used. We now have a feature called a <em>remote</em> that has become ubiquitous. A remote is commonly a Git server which can store your repository in a central place for all developers on your team to access. The first step in working with Git is almost always cloning.</p>
<h2 id=clone-a-repo>Clone a repo</h2>
<p>Cloning a repo is the act of downloading a copy of the repo to your local machine so you can work on it. The <code>git clone</code> command will create a new sub directory within your present working directory and clone the repo to it. To clone a repo using the HTTPS protocol:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git clone https://github.com/JamesCacioppo/git-zero-to-hero-demo.git
</code></pre></div><p>To clone a repo using SSH:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git clone git@github.com:JamesCacioppo/git-zero-to-hero-demo.git
</code></pre></div><h2 id=remotes>Remotes</h2>
<p>Display configured remotes:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git remote -v
origin  git@github.com:JamesCacioppo/JamesCacioppo.github.io.git <span style=color:#ce5c00;font-weight:700>(</span>fetch<span style=color:#ce5c00;font-weight:700>)</span>
origin  git@github.com:JamesCacioppo/JamesCacioppo.github.io.git <span style=color:#ce5c00;font-weight:700>(</span>push<span style=color:#ce5c00;font-weight:700>)</span>
</code></pre></div><p>To add a remote:</p>
<pre>git remote add upstream <var>URL</var></pre>
<p>To change a local branch&rsquo;s upstream tracking:</p>
<pre>git branch --set-upstream-to <var>REMOTE_NAME</var>/<var>BRANCH_NAME</var></pre>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git branch --set-upstream-to origin/main
branch <span style=color:#4e9a06>&#39;main&#39;</span> <span style=color:#204a87>set</span> up to track <span style=color:#4e9a06>&#39;origin/main&#39;</span>.
</code></pre></div><h2 id=branching>Branching</h2>
<p>When you first clone a repo you&rsquo;ll be in the default branch. This was historically called <em>master</em> and is now often named <em>main</em>. Most organizations use a branching strategy which usually involves creating a branch, committing changes to the branch, and then merging that branch back into <em>main</em>.</p>
<h3 id=creating-branches>Creating Branches</h3>
<p>The formal way to create a branch is with the <em>git-branch</em> command:</p>
<pre>git branch <var>BRANCH-NAME</var></pre>
<p>However, the previous command does not place you on that branch and you&rsquo;d still need to use the <em>git-checkout</em> command to switch branches. To create a branch and switch to it in one command use <em>git-checkout</em>:</p>
<pre>git checkout -b <var>BRANCH-NAME</var></pre>
<p>At this point your local repo is tracking the new branch but the remote is not. To update the remote:</p>
<pre>git push --set-upstream origin <var>BRANCH-NAME</var></pre>
<h3 id=useful-branching-commands>Useful Branching Commands</h3>
<p>To list local branches: <code>git branch</code></p>
<p>To list branches locally and remotely: <code>git branch -a</code></p>
<p>To rename the current branch: <code>git branch -m <var>BRANCH-NAME</var></code></p>
<p>To checkout a branch use: <code>git checkout <var>BRANCH-NAME</var></code></p>
<div class="alert alert-info" role=alert>
<h4 class=alert-heading>git-checkout</h4>
The git-checkout command only moves the <em>HEAD</em> pointer, not the branch pointer. This is different from git-reset.
</div>
<h3 id=deleting-branches>Deleting Branches</h3>
<p>When it comes time to delete a branch there are a few things to note.</p>
<ul>
<li>Deleting a branch locally is different from deleting a branch on the remote.</li>
<li>There are two ways to remove a branch locally listed below.
<ul>
<li>The &ldquo;safe&rdquo; way will only remove the branch if its changes have been merged into <em>main</em> while the &ldquo;forcefull&rdquo; method will remove the branch regardless of its status.</li>
</ul>
</li>
<li>You cannot remove a branch if you have it checked out.</li>
<li>When you delete a remote branch your local repo does not know and will need to be updated. To do this you must remove the branch refs.</li>
</ul>
<p>To safely remove a local branch use <code>git branch -d <var>BRANCH-NAME</var></code></p>
<p>To forcefully remove a local branch use <code>git branch -D <var>BRANCH-NAME</var></code></p>
<p>To remove a remote branch use <code>git push origin &ndash;delete <var>BRANCH-NAME</var></code></p>
<p>To remove deleted branch refs use <code>git remote prune origin</code></p>
<h2 id=branching-strategies>Branching Strategies</h2>
<p>When a team is using Git, some sort of workflow or branching strategy is required for the team to develop effectively. Junior developers need an understanding of various common strategies so they can onboard quickly to various teams and projects. Intermediate and senior developers will need a more in-depth understanding of the common strategies, their variants, benefits and drawbacks of each, and when to choose one strategy over another. What follows is just a brief introduction into a few common strategies.</p>
<h3 id=gitflow>Gitflow</h3>
<p>In 2010, Vincent Driessen documented <a href=https://nvie.com/posts/a-successful-git-branching-model/>Gitflow</a>. In a vacuum of well documented and capable strategies, <em>Gitflow</em> became almost ubiquitous in development teams and is still almost required knowledge. While this strategy works well under certain conditions, <em>Gitflow</em> has many drawbacks. In fact, Vincent even updated his post in 2020 explaining that it shouldn&rsquo;t necessarily be the default or go-to for all dev teams. We&rsquo;ll discuss some of the pro&rsquo;s and con&rsquo;s of <em>Gitflow</em>, but first, let&rsquo;s take a look at how it works.</p>
<p><img src=https://nvie.com/img/git-model@2x.png alt></p>
<p>Two branches live forever. They are <em>develop</em> and <em>master</em>. The <em>develop</em> branch is the branch from which almost all work is done. Developers will create feature branches from <em>develop</em> and merge their work back in.</p>
<p>Developers will also create <em>release</em> branches from <em>develop</em>. The purpose of creating these is to start preparing code for release or production deployment. Once this prep work is complete, <em>release</em> branches will be merged into <em>master</em>.</p>
<p>Bug and <em>hotfix</em> branches will be created from <em>master</em> and when complete they will be merged back into <em>master</em> as well as <em>develop</em>.</p>
<p>As you can see, this is a complex strategy which can result in some interesting merge conflicts. It also does not facilitate CI/CD.</p>
<p>There are circumstances, however, where releasing and deploying at a high frequency is undesirable or impossible. In these cases, this strategy can be helpful as there&rsquo;s a natural delay between selecting a release candidate and a push to production. The dedicated release branch allows developers to fix issues with the release candidate while continuing development of the baseline on <em>develop</em>.</p>
<h3 id=github-flow>Github flow</h3>
<p><em>Github flow</em>, designed by Github, is meant to provide many of the benefits seen in <em>Gitflow</em> while massively reducing complexity. Their <a href=https://docs.github.com/en/get-started/quickstart/github-flow>documentation</a> is clear and concise and definitely worth a look.</p>
<p><img src=https://github.com/JamesCacioppo/jimFlow/raw/master/jimFlow.png alt></p>
<p>In <em>Github flow</em>, there is only one long lived branch and it&rsquo;s the <em>main</em> branch. All working branches come from <em>main</em> and merge back into <em>main</em>. This includes branches for features, ops updates, bug and hot fixes, etc. When a commit on master is chosen for release a version tag is applied to it.</p>
<p>This strategy is very flexible. Testing can be done at any point. In fact, we&rsquo;ve found that it&rsquo;s effective to perform builds, deployments, and testing when a PR is created and on each subsequent commit which changes a PR. Then, we perform the same and more testing when merged back into <em>main</em>, build and push artifacts, and deploy into UAT environments.</p>
<h3 id=trunk>Trunk</h3>
<p>One of the main issues with many common strategies is the rate of integration. Continuous Integration (CI) means integrating, or merging, code back into the mainline as frequently as possible. In <em>Gitflow</em>, <em>Github flow</em>, and other similar strategies, developers commonly keep feature branches open for days if not entire sprints. What often results is sometimes called &ldquo;integration hell&rdquo; or &ldquo;merge hell&rdquo; as developers attempt to merge their code, which has become further and further out of date from the mainline as time has passed.</p>
<p>Enter <a href=https://trunkbaseddevelopment.com/>Trunk Based</a> workflows.</p>
<p><img src=https://trunkbaseddevelopment.com/trunk1c.png alt></p>
<p>The idea is that code is integrated into the mainline as often as every commit and at least once every 24 hours. Small two dev teams who are paired programming may commit directly to <em>master</em> while larger &ldquo;at scale&rdquo; teams will need to use feature branches. The key difference here is that feature branches should be very short lived and should be integrated at least once every 24 hours.</p>
<p>In order for this to work, thorough testing must be conducted before merging using various methods such as pre-commit hooks and the baseline should be kept in good working condition. If a bug is found in the baseline fixing it should be the priority.</p>
<p>A great resource is the site at <a href=https://continuousdelivery.com>ContinuousDelivery.com</a>. The page on <a href=https://continuousdelivery.com/foundations/continuous-integration/>Continuous Integration</a> is especially relevant to this topic.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-5e21f753738e878cd64571cab14673ef>4 - Kube Bench</h1>
<div class=lead>Set up kube-bench to perform scans and export the results.</div>
<h1 id=the-bluf>The BLUF</h1>
<p>How to set up <em>kube-bench</em> scans and export reports in an <em>EKS cluster</em>.</p>
<h1 id=the-long-description>The long description</h1>
<p>Running <em>kube-bench</em> scans as a k8s job against an EKS cluster is a pretty simple task. Even setting <em>kube-bench</em> up as a cron job is a fairly simple task. The issue arises when you have to do something with the results of the scan.</p>
<p>The answer we settled on was executing <em>kube-bench</em> as an <em>init container</em>, saving stdout to a file on a <em>pvc</em>, mounting the <em>pvc</em> to the AWS CLI container, and pushing the file to an <em>S3 bucket</em>. Our decisions were driven by a requirement which dictated that the reports be made available to a third party who would process them in a manner of their choosing.</p>
<p>The <em>kube-bench</em> tool can output files in JSON and JUNIT formats. For my purposes, the best solution is to take a JSON file and push it to an S3 bucket where it can be stored, retrieved, and fed into another system. In an ideal world you&rsquo;d want to push the output directly into a system under your control. In many cases you just have to make the results available to another party.</p>
<p>The process can be broken down into two main components: configuring AWS and configuring Kubernetes resources.</p>
<h2 id=configuring-aws>Configuring AWS</h2>
<h3 id=create-an-s3-bucket>Create an S3 bucket</h3>
<p>Name it <em>kluster-bucket</em></p>
<h3 id=create-identity-provider>Create Identity provider</h3>
<p>An identity provider tied to the cluster&rsquo;s OIDC provider is required to link AWS IAM to Kubernetes access control. In many cases, you may already have one in place. If not, follow these steps:</p>
<ol>
<li>Copy the OpenID Connect provider URL from the cluster details at <strong>EKS > Clusters > <em><code>cluster name</code></em></strong></li>
<li>Go to <strong>IAM -> Identity providers</strong> and click <strong>Add Provider</strong></li>
<li>Select <strong>OpenID Connect</strong>, enter the <strong>Provider URL</strong> copied from the cluster details in step 1, and select <strong>sts.amazonaws.com</strong> in <strong>Audience</strong>.</li>
</ol>
<div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:946px>
<img class=card-img-top src=/docs/kube-bench/k8s-oidc-url_hu6616eb99fe425c666567d800bd560836_308943_1200x400_fit_catmullrom_3.png width=936 height=400>
<div class="card-body px-0 pt-2 pb-0">
<p class=card-text>
</p>
</div>
</div>
<h3 id=create-an-iam-policy>Create an IAM Policy</h3>
<p>Create an IAM policy allowing write access to a specific S3 bucket:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
 <span style=color:#a40000>“Version”:</span> <span style=color:#a40000>“2012–10–17”,</span>
 <span style=color:#a40000>“Statement”:</span> <span style=color:#a40000>[</span>
    <span style=color:#a40000>{</span>
      <span style=color:#a40000>“Effect”:</span> <span style=color:#a40000>“Allow”,</span>
      <span style=color:#a40000>“Action”:</span> <span style=color:#a40000>[</span>
               <span style=color:#a40000>“s3:PutObject”</span>
       <span style=color:#a40000>],</span>
       <span style=color:#a40000>“Resource”:</span> <span style=color:#a40000>“arn:aws:s3:::kluster-bucket/*”</span>
    <span style=color:#000;font-weight:700>}</span>
 <span style=color:#a40000>]</span>
<span style=color:#a40000>}</span>
</code></pre></div><h3 id=create-an-iam-role>Create an IAM Role</h3>
<ol>
<li>Go to <strong>IAM > Roles</strong></li>
<li>Click <strong>Create Role</strong></li>
<li>Select <strong>Web identity</strong> for <strong>Trusted entity type</strong></li>
<li>Under <strong>Identity provider</strong>, select the OIDC Identity provider created earlier</li>
<li>Select <strong>sts.amazonaws.com</strong> for <strong>Audience</strong></li>
<li>Add the S3 IAM policy created earlier</li>
<li>Name and finalize the role. For our purposes, we&rsquo;ll name the role kluster-s3-write-access</li>
</ol>
<h3 id=tie-the-role-to-a-specific-k8s-namespace-and-service-account-optional>Tie the role to a specific K8s namespace and service account (optional)</h3>
<p>In the new role, edit the trust relationship. The dictionary <code>Statement.Condition.StringEquals</code> will have a key for the OIDC identity provider ending in <strong>aud</strong> and a value of <strong>sts.amazon.com</strong>. Update these to <strong>sub</strong> and <strong>system:serviceaccount:<em><code>namespace name</code></em>:<em><code>service account name</code></em></strong> respectively. They should look as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;Version&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2012-10-17&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;Statement&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
    <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;Effect&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Allow&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#204a87;font-weight:700>&#34;Principal&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;Federated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;arn:aws:iam::123456789012:oidc-provider/oidc.eks.us-east-1.amazonaws.com/id/1234567890AABBCCDDEEFF1234568901&#34;</span>
      <span style=color:#000;font-weight:700>},</span>
      <span style=color:#204a87;font-weight:700>&#34;Action&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;sts:AssumeRoleWithWebIdentity&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#204a87;font-weight:700>&#34;Condition&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;StringEquals&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
          <span style=color:#204a87;font-weight:700>&#34;oidc.eks.us-east-1.amazonaws.com/id/1234567890AABBCCDDEEFF1234568901:sub&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;system:serviceaccount:saymynamespace:s3-write&#34;</span>
        <span style=color:#000;font-weight:700>}</span>
      <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>}</span>
  <span style=color:#000;font-weight:700>]</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=configuring-kubernetes>Configuring Kubernetes</h2>
<h3 id=create-a-k8s-service-account>Create a K8s service account</h3>
<p>Create a service account in the kube-bench namespace. This service account ties to the AWS IAM role created earlier as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>v1</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ServiceAccount</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>s3-write</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>	</span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>kube-bench</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>annotations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>eks.amazonaws.com/role-arn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>arn:aws:iam::123456789012:role/kluster-s3-write-access</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=create-a-k8s-cronjob>Create a K8s Cronjob</h3>
<p>Create a Cronjob as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>batch/v1beta1</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>CronJob</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>kube-bench</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>kube-bench</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>schedule</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;0 10 * * *&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>jobTemplate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>template</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>hostPID</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>containers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>s3-push</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>amazon/aws-cli:2.7.29</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>command</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;bash&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;-c&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#39;aws s3 cp /report/kube-bench-report s3://kluster-bucket/kube-bench-report-$(date -u +%Y-%m-%dT%H.%M.%S)&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>volumeMounts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>empty-dir</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>mountPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/report</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>initContainers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>kube-bench</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>aquasec/kube-bench:v0.6.0</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>imagePullPolicy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>IfNotPresent</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>command</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;kube-bench&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;run&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;--targets&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;node&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;--benchmark&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;eks-1.0.1&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;--json&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;--outputfile&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#4e9a06>&#34;/report/kube-bench-report&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>volumeMounts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>var-lib-kubelet</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>mountPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/var/lib/kubelet</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>readOnly</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>etc-systemd</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>mountPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/etc/systemd</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>readOnly</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>etc-kubernetes</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>mountPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/etc/kubernetes</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>readOnly</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>empty-dir</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>mountPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/report</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>serviceAccountName</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>s3-write</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>restartPolicy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Never</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>volumes</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>var-lib-kubelet</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>hostPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;/var/lib/kubelet&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>etc-systemd</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>hostPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;/etc/systemd&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>etc-kubernetes</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>hostPath</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;/etc/kubernetes&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>empty-dir</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>emptyDir</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>{}<span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-92c27ea962011595550955f7c41b869a>5 - Python</h1>
<div class=lead>Python notes for myself as I learn the language.</div>
</div>
<div class=td-content>
<h1 id=pg-25f0fc747a43e426abe5e799bae26667>5.1 - venv</h1>
<div class=lead>venv</div>
<p>Create a dir (and any subdirs) and place a <code>pyvenv.cfg</code> as well as a <code>bin</code> dir.</p>
<pre>python -m venv <var>PATH</var></pre>
<p>For example:</p>
<pre>python -m venv .venv</pre>
<p>To activate the virtual environment:</p>
<pre>source <var>PATH</var>/bin/activate</pre>
<p>To deactivate the virtual environment:</p>
<pre>deactivate</pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-53649de095686aeee23ac7b7ea4778d3>5.2 - Pytest</h1>
<div class=lead>Pytest</div>
<p>To install:</p>
<pre>pip install pytest</pre>
<p>To execute:</p>
<pre>pytest</pre>
<p>Pytest will run the tests in any file prefixed with <code>test_</code>.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-57d045430feb096ff52b18f9ffa67d26>5.3 - Pyenv</h1>
<div class=lead>How to install and configure Pyenv. This is a WIP.</div>
<p>Install pyenv:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew update
brew install pyenv
</code></pre></div><p>Configure pyenv:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#39;export PYENV_ROOT=&#34;$HOME/.pyenv&#34;&#39;</span> &gt;&gt; ~/.zshrc
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#39;command -v pyenv &gt;/dev/null || export PATH=&#34;$PYENV_ROOT/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.zshrc
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#39;eval &#34;$(pyenv init -)&#34;&#39;</span> &gt;&gt; ~/.zshrc
</code></pre></div><p>Install build deps of MacOS: <code>brew install openssl readline sqlite3 xz zlib tcl-tk</code></p>
<p>List available versions: <code>pyenv install -l</code></p>
<p>Install a version: <code>pyenv install <var>version</var></code></p>
<p>Set a global version to use: <code>pyenv global <var>version</var></code></p>
<p>There are three ways to set the python version to be used:</p>
<ul>
<li>Select just for current shell session: <code>pyenv shell <var>version</var></code></li>
<li>Automatically select whenever you are in the current directory (or its subdirectories): <code>pyenv local <var>version</var></code></li>
<li>Select globally for your user account: <code>pyenv global <var>version</var></code></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d77fd444f8f51d12a8a2fdbaba8cce61>6 - Markdown</h1>
<div class=lead>A complete breakdown of widely accepted Markdown</div>
<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page. Replace it with your own content.</p>
</div>
<p>Text can be <strong>bold</strong>, <em>italic</em>, or <del>strikethrough</del>. <a href=https://gohugo.io>Links</a> should be blue with no underlines (unless hovered over).</p>
<blockquote>
<p>There should be no margin above this first sentence.</p>
<p>Blockquotes should be a lighter gray with a border along the left side in the secondary color.</p>
<p>There should be no margin below this final sentence.</p>
</blockquote>
<h2 id=general-styling>General Styling</h2>
<p>This is a normal paragraph following a header.</p>
<p>On big screens, paragraphs and headings should not take up the full container width, but we want tables, code blocks and similar to take the full width.</p>
<h2 id=second-header-2>Second Header 2</h2>
<blockquote>
<p>This is a blockquote following a header. Bacon ipsum dolor sit amet t-bone doner shank drumstick, pork belly porchetta chuck sausage brisket ham hock rump pig. Chuck kielbasa leberkas, pork bresaola ham hock filet mignon cow shoulder short ribs biltong.</p>
</blockquote>
<h3 id=header-3>Header 3</h3>
<pre tabindex=0><code>This is a code block following a header.
</code></pre><h4 id=header-4>Header 4</h4>
<ul>
<li>This is an unordered list following a header.</li>
<li>This is an unordered list following a header.</li>
<li>This is an unordered list following a header.</li>
</ul>
<h5 id=header-5>Header 5</h5>
<ol>
<li>This is an ordered list following a header.</li>
<li>This is an ordered list following a header.</li>
<li>This is an ordered list following a header.</li>
</ol>
<h6 id=header-6>Header 6</h6>
<table>
<thead>
<tr>
<th>What</th>
<th>Follows</th>
</tr>
</thead>
<tbody>
<tr>
<td>A table</td>
<td>A header</td>
</tr>
<tr>
<td>A table</td>
<td>A header</td>
</tr>
<tr>
<td>A table</td>
<td>A header</td>
</tr>
</tbody>
</table>
<hr>
<p>There&rsquo;s a horizontal rule above and below this.</p>
<hr>
<p>Here is an unordered list:</p>
<ul>
<li>Liverpool F.C.</li>
<li>Chelsea F.C.</li>
<li>Manchester United F.C.</li>
</ul>
<p>And an ordered list:</p>
<ol>
<li>Michael Brecker</li>
<li>Seamus Blake</li>
<li>Branford Marsalis</li>
</ol>
<p>And an unordered task list:</p>
<ul>
<li><input checked disabled type=checkbox> Create a Hugo theme</li>
<li><input checked disabled type=checkbox> Add task lists to it</li>
<li><input disabled type=checkbox> Take a vacation</li>
</ul>
<p>And a &ldquo;mixed&rdquo; task list:</p>
<ul>
<li><input disabled type=checkbox> Pack bags</li>
<li>?</li>
<li><input disabled type=checkbox> Travel!</li>
</ul>
<p>And a nested list:</p>
<ul>
<li>Jackson 5
<ul>
<li>Michael</li>
<li>Tito</li>
<li>Jackie</li>
<li>Marlon</li>
<li>Jermaine</li>
</ul>
</li>
<li>TMNT
<ul>
<li>Leonardo</li>
<li>Michelangelo</li>
<li>Donatello</li>
<li>Raphael</li>
</ul>
</li>
</ul>
<p>Definition lists can be used with Markdown syntax. Definition headers are bold.</p>
<dl>
<dt>Name</dt>
<dd>Godzilla</dd>
<dt>Born</dt>
<dd>1952</dd>
<dt>Birthplace</dt>
<dd>Japan</dd>
<dt>Color</dt>
<dd>Green</dd>
</dl>
<hr>
<p>Tables should have bold headings and alternating shaded rows.</p>
<table>
<thead>
<tr>
<th>Artist</th>
<th>Album</th>
<th>Year</th>
</tr>
</thead>
<tbody>
<tr>
<td>Michael Jackson</td>
<td>Thriller</td>
<td>1982</td>
</tr>
<tr>
<td>Prince</td>
<td>Purple Rain</td>
<td>1984</td>
</tr>
<tr>
<td>Beastie Boys</td>
<td>License to Ill</td>
<td>1986</td>
</tr>
</tbody>
</table>
<p>If a table is too wide, it should scroll horizontally.</p>
<table>
<thead>
<tr>
<th>Artist</th>
<th>Album</th>
<th>Year</th>
<th>Label</th>
<th>Awards</th>
<th>Songs</th>
</tr>
</thead>
<tbody>
<tr>
<td>Michael Jackson</td>
<td>Thriller</td>
<td>1982</td>
<td>Epic Records</td>
<td>Grammy Award for Album of the Year, American Music Award for Favorite Pop/Rock Album, American Music Award for Favorite Soul/R&B Album, Brit Award for Best Selling Album, Grammy Award for Best Engineered Album, Non-Classical</td>
<td>Wanna Be Startin' Somethin', Baby Be Mine, The Girl Is Mine, Thriller, Beat It, Billie Jean, Human Nature, P.Y.T. (Pretty Young Thing), The Lady in My Life</td>
</tr>
<tr>
<td>Prince</td>
<td>Purple Rain</td>
<td>1984</td>
<td>Warner Brothers Records</td>
<td>Grammy Award for Best Score Soundtrack for Visual Media, American Music Award for Favorite Pop/Rock Album, American Music Award for Favorite Soul/R&B Album, Brit Award for Best Soundtrack/Cast Recording, Grammy Award for Best Rock Performance by a Duo or Group with Vocal</td>
<td>Let&rsquo;s Go Crazy, Take Me With U, The Beautiful Ones, Computer Blue, Darling Nikki, When Doves Cry, I Would Die 4 U, Baby I&rsquo;m a Star, Purple Rain</td>
</tr>
<tr>
<td>Beastie Boys</td>
<td>License to Ill</td>
<td>1986</td>
<td>Mercury Records</td>
<td>noawardsbutthistablecelliswide</td>
<td>Rhymin & Stealin, The New Style, She&rsquo;s Crafty, Posse in Effect, Slow Ride, Girls, (You Gotta) Fight for Your Right, No Sleep Till Brooklyn, Paul Revere, Hold It Now, Hit It, Brass Monkey, Slow and Low, Time to Get Ill</td>
</tr>
</tbody>
</table>
<hr>
<p>Code snippets like <code>var foo = "bar";</code> can be shown inline.</p>
<p>Also, <code>this should vertically align</code> <del><code>with this</code></del> <del>and this</del>.</p>
<p>Code can also be shown in a block element.</p>
<pre tabindex=0><code>foo := &quot;bar&quot;;
bar := &quot;foo&quot;;
</code></pre><p>Code can also use syntax highlighting.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>input</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>`var foo = &#34;bar&#34;;`</span>

  <span style=color:#000>lexer</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>lexers</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;javascript&#34;</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000>iterator</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>_</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>lexer</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Tokenise</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>input</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000>style</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>styles</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;github&#34;</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000>formatter</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>html</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>html</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithLineNumbers</span><span style=color:#000;font-weight:700>())</span>

  <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>buff</span> <span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Buffer</span>
  <span style=color:#000>formatter</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Format</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>buff</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>style</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>iterator</span><span style=color:#000;font-weight:700>)</span>

  <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buff</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>())</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><pre tabindex=0><code>Long, single-line code blocks should not wrap. They should horizontally scroll if they are too long. This line should be long enough to demonstrate this.
</code></pre><p>Inline code inside table cells should still be distinguishable.</p>
<table>
<thead>
<tr>
<th>Language</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Javascript</td>
<td><code>var foo = "bar";</code></td>
</tr>
<tr>
<td>Ruby</td>
<td><code>foo = "bar"{</code></td>
</tr>
</tbody>
</table>
<hr>
<p>Small images should be shown at their actual size.</p>
<p><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg/240px-Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg alt></p>
<p>Large images should always scale down and fit in the content container.</p>
<p><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg/1024px-Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg alt></p>
<p><em>The photo above of the Spruce Picea abies shoot with foliage buds: Bjørn Erik Pedersen, CC-BY-SA.</em></p>
<h2 id=components>Components</h2>
<h3 id=alerts>Alerts</h3>
<p>
<div class="alert alert-primary" role=alert>
This is an alert.
</div>
<div class="alert alert-primary" role=alert>
<h4 class=alert-heading>Note</h4>
This is an alert with a title.
</div>
<div class="alert alert-primary" role=alert>
<h4 class=alert-heading>Note</h4>
This is an alert with a title and <strong>Markdown</strong>.
</div>
<div class="alert alert-success" role=alert>
This is a successful alert.
</div>
<div class="alert alert-warning" role=alert>
This is a warning.
</div>
<div class="alert alert-warning" role=alert>
<h4 class=alert-heading>Warning</h4>
This is a warning with a title.
</div>
</p>
<h2 id=another-heading>Another Heading</h2>
<p>Add some sections here to see how the ToC looks like. Bacon ipsum dolor sit amet t-bone doner shank drumstick, pork belly porchetta chuck sausage brisket ham hock rump pig. Chuck kielbasa leberkas, pork bresaola ham hock filet mignon cow shoulder short ribs biltong.</p>
<h3 id=this-document>This Document</h3>
<p>Inguina genus: Anaphen post: lingua violente voce suae meus aetate diversi. Orbis unam nec flammaeque status deam Silenum erat et a ferrea. Excitus rigidum ait: vestro et Herculis convicia: nitidae deseruit coniuge Proteaque adiciam <em>eripitur</em>? Sitim noceat signa <em>probat quidem</em>. Sua longis <em>fugatis</em> quidem genae.</p>
<h3 id=pixel-count>Pixel Count</h3>
<p>Tilde photo booth wayfarers cliche lomo intelligentsia man braid kombucha vaporware farm-to-table mixtape portland. PBR&B pickled cornhole ugh try-hard ethical subway tile. Fixie paleo intelligentsia pabst. Ennui waistcoat vinyl gochujang. Poutine salvia authentic affogato, chambray lumbersexual shabby chic.</p>
<h3 id=contact-info>Contact Info</h3>
<p>Plaid hell of cred microdosing, succulents tilde pour-over. Offal shabby chic 3 wolf moon blue bottle raw denim normcore poutine pork belly.</p>
<h3 id=external-links>External Links</h3>
<p>Stumptown PBR&B keytar plaid street art, forage XOXO pitchfork selvage affogato green juice listicle pickled everyday carry hashtag. Organic sustainable letterpress sartorial scenester intelligentsia swag bushwick. Put a bird on it stumptown neutra locavore. IPhone typewriter messenger bag narwhal. Ennui cold-pressed seitan flannel keytar, single-origin coffee adaptogen occupy yuccie williamsburg chillwave shoreditch forage waistcoat.</p>
<pre tabindex=0><code>This is the final element on the page and there should be no margin below this.
</code></pre>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/JamesCacioppo/JamesCacioppo.github.io.git aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2023 James Cacioppo All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<p class=mt-2><a href=/about/>About James</a></p>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.8ab8f81ff7e1454d30024cd6f956d4d341c3a97e2a673f988065f2ee4e147922.js integrity="sha256-irj4H/fhRU0wAkzW+VbU00HDqX4qZz+YgGXy7k4UeSI=" crossorigin=anonymous></script>
<script src=/js/prism.js></script>
</body>
</html>